(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{370:function(a,s,t){"use strict";t.r(s);var e=t(17),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h3",{attrs:{id:"启动过程报错"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动过程报错","aria-hidden":"true"}},[a._v("#")]),a._v(" 启动过程报错")]),a._v(" "),t("h4",{attrs:{id:"max-virtual-memory-areas-vm-max-map-count-65530-is-too-low-increase-to-at-least-262144"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#max-virtual-memory-areas-vm-max-map-count-65530-is-too-low-increase-to-at-least-262144","aria-hidden":"true"}},[a._v("#")]),a._v(" max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144]")]),a._v(" "),t("p",[a._v("添加配置 /etc/sysctl.conf (永久性修改)")]),a._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# elasticsearch config start")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("vm.max_map_count")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("262144")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# elasticsearch config end")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("blockquote",[t("p",[a._v("sysctl -p")])]),a._v(" "),t("h4",{attrs:{id:"max-file-descriptors-4096-for-elasticsearch-process-is-too-low-increase-to-at-least-65535"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#max-file-descriptors-4096-for-elasticsearch-process-is-too-low-increase-to-at-least-65535","aria-hidden":"true"}},[a._v("#")]),a._v(" max file descriptors [4096] for elasticsearch process is too low, increase to at least [65535]")]),a._v(" "),t("p",[a._v("添加配置 /etc/security/limits.conf  (永久性修改)")]),a._v(" "),t("div",{staticClass:"language-properties line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# elasticsearch config start")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("*")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("soft nofile 65536")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("*")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("hard nofile 131072")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("*")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("soft nproc 2048")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("*")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("hard nproc 4096")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# elasticsearch config end")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br")])]),t("p",[a._v("重启\nelasticsearch.yml")]),a._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("node.name")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" node"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("1")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("cluster.initial_master_nodes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"node-1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("p",[t("code",[a._v("主节点")]),a._v("负责创建索引、删除索引、分配分片、追踪集群中的节点状态等工作")]),a._v(" "),t("p",[a._v("Elasticsearch中的主节点的工作量相对较轻，用户的请求可以发往任何一个节点，由该节点负责分发和返回结果，而不需要经过主节点转发")]),a._v(" "),t("p",[a._v("如果单个node分配多个shard，就会引入另外一系列的性能问题，我们知道对于任意一次完整的搜索，ElasticSearch会分别对每个shard进行查询，最后进行汇总。当节点数和shard数是一对一的时候，所有的查询可以并行运行。但是，对于具有多个shard的节点，如果磁盘是15000RPM或SSD，可能会相对较快，但是这也会存在等待响应的问题，所以通常不推荐一个节点超过2个shard。")]),a._v(" "),t("p",[a._v("但是如果一个小集群，就10个以内的节点，那就所有节点都可以作为master eligible node以及data node即可，超过10个node的集群再单独拆分master和data node吧")]),a._v(" "),t("p",[a._v("如果你的节点数量小于10个，小集群，那所有的node，就不要做额外的配置了，master eligible node，同时也是data node")])])}),[],!1,null,null,null);s.default=r.exports}}]);